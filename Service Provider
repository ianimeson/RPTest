Service Provider Usage

It is strongly recommended that you consider using a JSONview plugin for your browser for a better experience.
1. POST the following JSON (via Advanced Rest Client or curl or similar) to https://test-hub.reference.ida.digital.cabinet-office.gov.uk/rp-test-data 

Content-Type: application/json
{
"rpEntityId":"[Entity Id for your service]",
"assertionConsumerServiceUrl":"[url that will consume responses from the hub]",
"signingPublicCert":"[base 64 encoded public cert used to validate signatures]",
"encryptionPublicCert":"[base 64 encoded public cert for encryption]",
"expectedPID":"[user id that will be returned in the assertion from the matching service]",
"matchingServiceEntityId":"[entity id of the matching service]",
"matchingServiceSigningPrivateCert":"[private key that the matching service would use to sign the messages]"
}


2. You will see a response similar to this one:

Status 200 Created


3. Navigate (via a browser or a suitably scripted alternative) to your service.
4. Click on whichever link initiates your authentication flow
5. If the status is "PASSED" select the link provided in responseGeneratorLocation.
6. Select the 'executeUri' link on the test case you wish to execute.
The following is a working example:

{
"rpEntityId":"http://www.companies-house.gov.uk/SAML2/MD",
"assertionConsumerServiceUrl":"https://companies-house.reference.ida.digital.cabinet-office.gov.uk/login",
"signingPublicCert":"MIIDwzCCAqugAwIBAgIQW8Q3aNh/bu31JKlb6MWU6TANBgkqhkiG9w0BAQsFADBLMQswCQYDVQQGEwJHQjEXMBUGA1UEChMOQ2FiaW5ldCBPZmZpY2UxDDAKBgNVBAsTA0dEUzEVMBMGA1UEAxMMSURBUCBUZXN0IENBMB4XDTEzMDkxMTAwMDAwMFoXDTE1MDkxMTIzNTk1OVoweDELMAkGA1UEBhMCR0IxDzANBgNVBAgTBkxvbmRvbjEPMA0GA1UEBxMGTG9uZG9uMRcwFQYDVQQKFA5DYWJpbmV0IE9mZmljZTEMMAoGA1UECxQDR0RTMSAwHgYDVQQDExdDb21wYW5pZXMgSG91c2UgU2lnbmluZzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA1gN7sBmGSylXG/Q4gSwp3y+Z0leQTgPapGpwqDvsVpXyRFtcUob2RtA8xusFC2jWnGNuwfgQ1W/tqP0Ils00MSO+fKaFQEll2OPwKKPHKijSGLr+y2R24pZJKRUhrm6v+Q2G+DfO1I2Bd36z0zgqi2AxFideaybacg2lUzY3kxsCAwEAAaOB+TCB9jAMBgNVHRMBAf8EAjAAMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9vbnNpdGVjcmwtdGVzdC50cnVzdHdpc2UuY29tL0NhYmluZXRPZmZpY2VJREFQVGVzdENBL0xhdGVzdENSTC5jcmwwDgYDVR0PAQH/BAQDAgeAMB0GA1UdDgQWBBQ6N7cC/N69/g9OSs/P6WVbvOgY+zAfBgNVHSMEGDAWgBRqEU1kUN/eY29XoYgf+AOVDiIEtDA6BggrBgEFBQcBAQQuMCwwKgYIKwYBBQUHMAGGHmh0dHA6Ly9vY3NwLXRlc3QudHJ1c3R3aXNlLmNvbTANBgkqhkiG9w0BAQsFAAOCAQEAGFY9nJ1J/eaMo7r4T3HxkWdH/Vm6cI9x0nBmgB9nibn61U4MrKImwiY2Zba7rYoFhLKkMBgfVQY/PmMKCKuCnP0l9lJ6oYGyxtWRz/uEGIII+PM/feXYAyFlrABiPv5TJOxpOnHdAocJ0XBa1OWri2kArfc99nozrjV+jWKTbbrBPtDwA8e5nDrX+Hm9mf73T8neo3zOMr6kRnxykwll1RxN3hAmAEwRrpZisxR2+0mwX0sDVa/DXK0ineOB6iJWemtmOYCh9yeN+PVnCpa0suicnU5s3HrzeKiZ9U0VrgA14ii/5dNF6RnMFug8QLgNOqBVWZ17jOowQD59AdymRA==",
"encryptionPublicCert":"MIIDwTCCAqmgAwIBAgIQd/Dw6ZLsVP1PolV4c7YCFjANBgkqhkiG9w0BAQsFADBLMQswCQYDVQQGEwJHQjEXMBUGA1UEChMOQ2FiaW5ldCBPZmZpY2UxDDAKBgNVBAsTA0dEUzEVMBMGA1UEAxMMSURBUCBUZXN0IENBMB4XDTEzMDkxMTAwMDAwMFoXDTE1MDkxMTIzNTk1OVowezELMAkGA1UEBhMCR0IxDzANBgNVBAgTBkxvbmRvbjEPMA0GA1UEBxMGTG9uZG9uMRcwFQYDVQQKFA5DYWJpbmV0IE9mZmljZTEMMAoGA1UECxQDR0RTMSMwIQYDVQQDExpDb21wYW5pZXMgSG91c2UgRW5jcnlwdGlvbjCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEArPnWzjr7vnOjEre2lNCKHBmhRqEfF7XC+gc5Em5IEFnjdVJHBR9pQLjm+o3WwUd21U+WL5lSLLN7VUmKT3lmd4kMlmGAcvS6PiQcSG3Sfx4pKl5le6NblE8rhjXRvcRDmGc7cfvFhVbb5wf6oTid8OYy5hgujiXhZ+oSUmyVPw0CAwEAAaOB9DCB8TAMBgNVHRMBAf8EAjAAMFUGA1UdHwROMEwwSqBIoEaGRGh0dHA6Ly9vbnNpdGVjcmwudmluby5idC5jby51ay9DYWJpbmV0T2ZmaWNlSURBUFRlc3RDQS9MYXRlc3RDUkwuY3JsMA4GA1UdDwEB/wQEAwIFIDAdBgNVHQ4EFgQUi/GaO7jjEodb1EpozzXteLJ1qm4wHwYDVR0jBBgwFoAUahFNZFDf3mNvV6GIH/gDlQ4iBLQwOgYIKwYBBQUHAQEELjAsMCoGCCsGAQUFBzABhh5odHRwOi8vb2NzcC10ZXN0LnRydXN0d2lzZS5jb20wDQYJKoZIhvcNAQELBQADggEBADXqahIvSQqvRfGNaKGvAYD9Dc45Myn8iGTimDTPXlT13ceh3e1A61r6JSoW+++KYs7OkAtejxFTla/hFZIO5pctH59qiD4jEMxX5CeDO36yI0DNGJws6oIfUh8bsZHnoCuzFGnOU2DGfdWhW9QFthanXwJqjghl+J4cFwNpO4ws9+yyDfkyFOKcIBHu9jM4Lf9Y8cgYFa9Cry5pmjzqo/mXglm5NT8hIaEhcs8aAY+gR9VWybBURuyrOuVl0REOAt7HdWm/G3UNv/I/TjUAUEGMGlBuINsQiypWHf8Xr6P6POQ4igRhD0t6RFCSB90XYKjb5DuIwXTkDt04GUwSFoQ=",
"expectedPID":"donaldId",
"matchingServiceEntityId":"msaentity",
"matchingServiceSigningPrivateCert":"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAMzQQQrZk+4wYivu10LHnyRWia9H4PvkIsdm0ZkKef8I9vdOVw5fG/028qqQ/jDCXcauabwb8XxXHAhQEz9V8aJ++qJa0Tfl2JlAez98baXiXwAF/PdYxQV003wqwlWBvhTkUsBDWuU1uipyMZ3SrLRlq8ebedi5TH1yikAhvgU1AgMBAAECgYAmBuSMpykYKFOR5J6C/51EmeymZqoXGpx6eVShHZjZCUkRUbJIMNB5iyIzGQiY9P2ETg3Dp0yG0YWa5YMtVz+tnuXUwA6gx/nLQCoOlPmeKDKgVePx7d97JOHGgAjETmDsf9lY3Url7ERAxcXCfUPrNd4s8MXze4RU2w+4AVJ5AQJBAOt6q/h1nj63wJwRKWj+HEqdRkmSgdyQPOjzjV/SmR56UQzy8r9sLMEdcG+qN7/Z+AMBW4Wme1nuIS4O4GXwX50CQQDeqXVVqdjMcGOgGFBU53oR7v1iyOKDE8XuEIDZFwd43eBwE7YmGsAMC7SU0kqTRwc+9GtvIzj8kwihSwEfDeR5AkEAl7es72NQttYLikJgbN40ejqE28hCVUq1g93P+6ojr4hdijtJ/d2DpFUEaV3Bl6GncsBAKIdQOGv+Ar/hAqzx3QJAT7LUPt9WrIamAk3xoxJfzT+ADvXcrhJLzJS3qfzmPcsdZMCJeEYm66jc8E/9RY4s98nBErzGzxFKC4GvWxA78QJAKlyo9p0frZRPh2vhTnMpubTm0FedxpL4I8NCLWseEY5NnOcbyNuQ6RWFJLXn7j2ccAseKXXtYyEzwkPJ5y0KWA=="
}


After posting the above visit: https://companies-house.reference.ida.digital.cabinet-office.gov.uk/companies-house and click 'next'.

